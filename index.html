<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema do Tribunal do J√∫ri - Tau√°/CE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: #007bff;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 30px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #007bff;
        }

        .section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
        }

        .section h3::before {
            content: "üìã";
            margin-right: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #1e7e34);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
            color: #212529;
        }

        .btn-danger {
            background: linear-gradient(45deg, #dc3545, #c82333);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .jurado-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .jurado-name {
            font-weight: bold;
            color: #2c3e50;
        }

        .checkbox-group {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            transform: scale(1.2);
        }

        .lista-resultado {
            background: white;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            min-height: 200px;
        }

        .lista-resultado h4 {
            color: #007bff;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .lista-item {
            background: #f0f8ff;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #007bff;
        }

        .resultado-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .condicional {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #e7f3ff;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }

        .condicional.ativo {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            font-weight: bold;
        }

        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .alert-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.ativo {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #007bff, #0056b3);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öñÔ∏è Sistema do Tribunal do J√∫ri</h1>
            <p>Comarca de Tau√° - Estado do Cear√°</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="abrirAba('presenca')">üìã Presen√ßa dos Jurados</button>
            <button class="tab" onclick="abrirAba('sorteio')">üé≤ Sorteio do Conselho</button>
            <button class="tab" onclick="abrirAba('ata')">üìÑ Dados da Ata</button>
        </div>

        <div id="presenca" class="tab-content active">
            <div class="section">
                <h3>Lista de Jurados Convocados</h3>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary" onclick="marcarTodos()">‚úÖ Marcar Todos como Presentes</button>
                    <button class="btn btn-warning" onclick="limparTodos()">üîÑ Limpar Sele√ß√µes</button>
                    <button class="btn btn-success" onclick="registrarPresenca()">üíæ Registrar Presen√ßas</button>
                </div>
                <div id="lista-jurados"></div>
            </div>
        </div>

        <div id="sorteio" class="tab-content">
            <div class="section">
                <h3>Sorteio do Conselho de Senten√ßa</h3>
                <div style="text-align: center; margin-bottom: 30px;">
                    <button class="btn btn-success" onclick="iniciarSorteio()" style="font-size: 1.3em; padding: 20px 40px;">
                        üé≤ INICIAR SORTEIO DO CONSELHO
                    </button>
                </div>
                
                <div class="resultado-grid">
                    <div class="lista-resultado">
                        <h4>üë• Conselho de Senten√ßa (7 jurados)</h4>
                        <div id="conselho-lista"></div>
                    </div>
                    <div class="lista-resultado">
                        <h4>‚ùå Recusados pela Defesa</h4>
                        <div id="recusados-defesa"></div>
                    </div>
                    <div class="lista-resultado">
                        <h4>‚ùå Recusados pela Acusa√ß√£o</h4>
                        <div id="recusados-acusacao"></div>
                    </div>
                    <div class="lista-resultado">
                        <h4>üö´ Impedidos (Foro √çntimo)</h4>
                        <div id="impedidos-lista"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="ata" class="tab-content">
            <form id="form-ata">
                <div class="section">
                    <h3>Dados B√°sicos da Sess√£o</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>N√∫mero da Sess√£o:</label>
                            <input type="number" id="numero-sessao" placeholder="Ex: 1, 2, 3...">
                        </div>
                        <div class="form-group">
                            <label>Data da Sess√£o:</label>
                            <input type="date" id="data-sessao">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Hora da Sess√£o:</label>
                            <input type="time" id="hora-sessao">
                        </div>
                        <div class="form-group">
                            <label>N√∫mero do Processo:</label>
                            <input type="text" id="numero-processo" placeholder="0000000-00.0000.8.06.0000">
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Profissionais Envolvidos</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nome do Juiz:</label>
                            <input type="text" id="nome-juiz" placeholder="Dr. [Nome do Juiz]">
                        </div>
                        <div class="form-group">
                            <label>Nome do Promotor:</label>
                            <input type="text" id="nome-promotor" placeholder="Dr. [Nome do Promotor]">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Tipo de Defensor:</label>
                            <select id="tipo-defensor" onchange="mostrarOAB()">
                                <option value="Defensor P√∫blico">Defensor P√∫blico</option>
                                <option value="Advogado(a)">Advogado(a)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Nome do Defensor:</label>
                            <input type="text" id="nome-defensor" placeholder="Nome completo">
                        </div>
                    </div>
                    <div class="form-group condicional" id="campo-oab">
                        <label>OAB/UF:</label>
                        <input type="text" id="oab" placeholder="Ex: 12345/CE">
                    </div>
                    <div class="form-group">
                        <label>Nome(s) do(s) Acusado(s):</label>
                        <input type="text" id="nome-acusados" placeholder="Nome completo do(s) r√©u(s)">
                    </div>
                </div>

                <div class="section">
                    <h3>Dispensas e Suplentes</h3>
                    <div class="form-group">
                        <label>Jurados Dispensados:</label>
                        <textarea id="jurados-dispensados" placeholder="Liste os jurados dispensados, separados por v√≠rgula" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Fundamento da Dispensa:</label>
                        <textarea id="fundamento-dispensa" placeholder="Justificativa legal para as dispensas" rows="2"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Foram sorteados suplentes?</label>
                            <select id="suplentes" onchange="mostrarSuplentes()">
                                <option value="N√£o">N√£o</option>
                                <option value="Sim">Sim</option>
                            </select>
                        </div>
                        <div class="form-group condicional" id="campo-suplentes">
                            <label>Nome(s) dos suplentes:</label>
                            <input type="text" id="nomes-suplentes" placeholder="Nome dos suplentes sorteados">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Testemunhas Dispensadas:</label>
                        <textarea id="testemunhas-dispensadas" placeholder="Testemunhas dispensadas de comum acordo" rows="2"></textarea>
                    </div>
                </div>

                <div class="section">
                    <h3>Instru√ß√£o Plen√°ria</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>H√° v√≠tima a ser ouvida?</label>
                            <select id="ha-vitima" onchange="mostrarVitima()">
                                <option value="N√£o">N√£o</option>
                                <option value="Sim">Sim</option>
                            </select>
                        </div>
                        <div class="form-group condicional" id="campo-vitima">
                            <label>Nome(s) da(s) v√≠tima(s):</label>
                            <input type="text" id="nome-vitima" placeholder="Nome completo da v√≠tima">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>H√° testemunhas/informantes?</label>
                        <select id="ha-testemunhas" onchange="mostrarTestemunhas()">
                            <option value="N√£o">N√£o</option>
                            <option value="Sim">Sim</option>
                        </select>
                    </div>
                    
                    <div class="condicional" id="campos-testemunhas">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Testemunhas da Acusa√ß√£o:</label>
                                <textarea id="testemunhas-acusacao" placeholder="Nome das testemunhas da acusa√ß√£o" rows="2"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Informantes da Acusa√ß√£o:</label>
                                <textarea id="informantes-acusacao" placeholder="Nome dos informantes da acusa√ß√£o" rows="2"></textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Testemunhas da Defesa:</label>
                                <textarea id="testemunhas-defesa" placeholder="Nome das testemunhas da defesa" rows="2"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Informantes da Defesa:</label>
                                <textarea id="informantes-defesa" placeholder="Nome dos informantes da defesa" rows="2"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Dilig√™ncias</h3>
                    <div class="form-group">
                        <label>Foi requerida dilig√™ncia probat√≥ria?</label>
                        <select id="ha-diligencia" onchange="mostrarDiligencia()">
                            <option value="N√£o">N√£o</option>
                            <option value="Sim">Sim</option>
                        </select>
                    </div>
                    
                    <div class="condicional" id="campos-diligencia">
                        <div class="form-group">
                            <label>Qual dilig√™ncia foi requerida?</label>
                            <textarea id="qual-diligencia" placeholder="Descreva a dilig√™ncia requerida" rows="2"></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>A dilig√™ncia foi deferida?</label>
                                <select id="diligencia-deferida">
                                    <option value="Sim">Sim</option>
                                    <option value="N√£o">N√£o</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Fundamento da decis√£o:</label>
                                <textarea id="fundamento-diligencia" placeholder="Fundamento legal da decis√£o" rows="2"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Debates Orais</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Hor√°rio in√≠cio MP:</label>
                            <input type="time" id="hora-mp-inicio">
                        </div>
                        <div class="form-group">
                            <label>Hor√°rio fim MP:</label>
                            <input type="time" id="hora-mp-fim">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Pedido do Minist√©rio P√∫blico:</label>
                        <textarea id="pedido-mp" placeholder="Descreva o pedido do MP (condena√ß√£o, artigos, etc.)" rows="2"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Hor√°rio in√≠cio Defesa:</label>
                            <input type="time" id="hora-defesa-inicio">
                        </div>
                        <div class="form-group">
                            <label>Hor√°rio fim Defesa:</label>
                            <input type="time" id="hora-defesa-fim">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Pedido da Defesa:</label>
                        <textarea id="pedido-defesa" placeholder="Descreva o pedido da defesa (absolvi√ß√£o, desclassifica√ß√£o, etc.)" rows="2"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Houve r√©plica?</label>
                        <select id="houve-replica" onchange="mostrarReplica()">
                            <option value="N√£o">N√£o</option>
                            <option value="Sim">Sim</option>
                        </select>
                    </div>
                    
                    <div class="condicional" id="campos-replica">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Hor√°rio in√≠cio r√©plica:</label>
                                <input type="time" id="hora-replica-inicio">
                            </div>
                            <div class="form-group">
                                <label>Hor√°rio fim r√©plica:</label>
                                <input type="time" id="hora-replica-fim">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Hor√°rio in√≠cio tr√©plica:</label>
                                <input type="time" id="hora-treplica-inicio">
                            </div>
                            <div class="form-group">
                                <label>Hor√°rio fim tr√©plica:</label>
                                <input type="time" id="hora-treplica-fim">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Resultado do Julgamento</h3>
                    <div class="form-group">
                        <label>Resultado:</label>
                        <select id="resultado-julgamento" onchange="atualizarTextoSentenca()">
                            <option value="Condena√ß√£o">Condena√ß√£o</option>
                            <option value="Absolvi√ß√£o">Absolvi√ß√£o</option>
                        </select>
                    </div>
                    <div class="alert alert-success" id="texto-sentenca">
                        Terminada a vota√ß√£o e assinado o termo, o MM. Juiz de Direito determinou a abertura das portas para que o p√∫blico retornasse ao sal√£o do j√∫ri e leu a SENTEN√áA CONDENAT√ìRIA, em voz alta, tornando p√∫blico o julgado.
                    </div>
                    
                    <div class="form-group">
                        <label>Houve manifesta√ß√£o de recurso?</label>
                        <select id="houve-recurso" onchange="mostrarRecurso()">
                            <option value="N√£o">N√£o</option>
                            <option value="Sim">Sim</option>
                        </select>
                    </div>
                    
                    <div class="condicional" id="campos-recurso">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Quem recorreu?</label>
                                <select id="quem-recorreu">
                                    <option value="A Defesa">A Defesa</option>
                                    <option value="A Acusa√ß√£o">A Acusa√ß√£o</option>
                                    <option value="Ambas as partes">Ambas as partes</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Fundamento do recurso:</label>
                                <input type="text" id="fundamento-recurso" placeholder="Ex: art. 593, III, a do CPP" value="art. 593, III, &quot;a&quot; do CPP">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Pr√≥xima Sess√£o</h3>
                    <div class="form-group">
                        <label>Haver√° pr√≥xima sess√£o?</label>
                        <select id="proxima-sessao" onchange="mostrarProximaSessao()">
                            <option value="N√£o">N√£o</option>
                            <option value="Sim">Sim</option>
                        </select>
                    </div>
                    
                    <div class="condicional" id="campos-proxima-sessao">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Data da pr√≥xima sess√£o:</label>
                                <input type="date" id="data-proxima-sessao">
                            </div>
                            <div class="form-group">
                                <label>Hora da pr√≥xima sess√£o:</label>
                                <input type="time" id="hora-proxima-sessao">
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; padding: 30px;">
                    <button type="button" class="btn btn-success" onclick="gerarAta()" style="font-size: 1.5em; padding: 20px 50px;">
                        üìÑ GERAR ATA DO J√öRI
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Lista de jurados
        const jurados = [
            "Antonia Gilderli Alves Venancio", "Antonia Wedna Ferreira Martins", "Antonio Cleurisney Carvalho Almeida",
            "Antonio Jose de Aquino", "Antonio Luis Alves de Lima", "Arialdo Lima Urbano", "Domingas Pedrosa de Oliveira",
            "Elizangela Gon√ßalves Fernandes Viana", "Emanuela Martins de Oliveira", "Francisca Fernandes Moreira Loiola",
            "Ivaltania Gon√ßalves Martins Cavalheiro", "Julio Marcos Siqueira Lima", "Lidiane Rodrigues Lira",
            "Luis Ednardo Benevides Reis", "Luiza Jessica Ribeiro de Sousa", "Madalena Maria Alves Mota Gomes",
            "Maria Alves Veloso", "Maria Angelucia Carvalho de Brito", "Maria Audecira Sousa Cavalcante",
            "Maria Cirlene Rodrigues Pereira", "Maria Elionete Araujo Teixeira", "Maria Jose Pires Santos da Franca",
            "Rogermo Tertuliano de Melo", "Vilma Lacerda Aurelia", "Wilkens Cavalcante Mota"
        ];

        let presentes = [];
        let ausentes = [];
        let justificadas = [];
        let conselho = [];
        let recusadosDefesa = [];
        let recusadosAcusacao = [];
        let impedidos = [];

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            criarListaJurados();
            // Garante que o texto da senten√ßa inicial esteja correto ao carregar a p√°gina
            atualizarTextoSentenca(); 
        });

        // Fun√ß√£o para abrir abas
        function abrirAba(aba) {
            // Esconder todas as abas
            const abas = document.querySelectorAll('.tab-content');
            abas.forEach(a => a.classList.remove('active'));
            
            const botoes = document.querySelectorAll('.tab');
            botoes.forEach(b => b.classList.remove('active'));
            
            // Mostrar aba selecionada e ativar o bot√£o
            document.getElementById(aba).classList.add('active');
            // 'event.target' se refere ao bot√£o que foi clicado
            event.target.classList.add('active'); 
        }

        // Criar lista de jurados
        function criarListaJurados() {
            const container = document.getElementById('lista-jurados');
            container.innerHTML = '';
            
            jurados.forEach((jurado, index) => {
                const item = document.createElement('div');
                item.className = 'jurado-item';
                item.innerHTML = `
                    <div class="jurado-name">${jurado}</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="presente-${index}" onchange="atualizarCheckboxes(${index}, 'presente')">
                            <label for="presente-${index}">Presente</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="justificada-${index}" onchange="atualizarCheckboxes(${index}, 'justificada')">
                            <label for="justificada-${index}">Aus√™ncia Justificada</label>
                        </div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Atualizar checkboxes (s√≥ um pode estar marcado por jurado)
        function atualizarCheckboxes(index, tipo) {
            if (tipo === 'presente') {
                if (document.getElementById(`presente-${index}`).checked) {
                    document.getElementById(`justificada-${index}`).checked = false;
                }
            } else if (tipo === 'justificada') {
                if (document.getElementById(`justificada-${index}`).checked) {
                    document.getElementById(`presente-${index}`).checked = false;
                }
            }
        }

        // Marcar todos como presentes
        function marcarTodos() {
            jurados.forEach((_, index) => {
                document.getElementById(`presente-${index}`).checked = true;
                document.getElementById(`justificada-${index}`).checked = false;
            });
        }

        // Limpar todas as sele√ß√µes
        function limparTodos() {
            jurados.forEach((_, index) => {
                document.getElementById(`presente-${index}`).checked = false;
                document.getElementById(`justificada-${index}`).checked = false;
            });
        }

        // Registrar presen√ßa
        function registrarPresenca() {
            presentes = [];
            ausentes = [];
            justificadas = [];
            
            jurados.forEach((jurado, index) => {
                const presente = document.getElementById(`presente-${index}`).checked;
                const justificada = document.getElementById(`justificada-${index}`).checked;
                
                if (presente) {
                    presentes.push(jurado);
                } else if (justificada) {
                    ausentes.push(jurado);
                    justificadas.push(jurado);
                } else {
                    ausentes.push(jurado);
                }
            });
            
            alert(`‚úÖ Presen√ßa registrada!\n\nüìã Presentes: ${presentes.length}\n‚ùå Ausentes: ${ausentes.length}\nüìù Justificadas: ${justificadas.length}`);
        }

        // Iniciar sorteio
        function iniciarSorteio() {
            if (presentes.length === 0) {
                alert('‚ö†Ô∏è Primeiro registre a presen√ßa dos jurados na aba anterior!');
                return;
            }
            
            if (presentes.length < 7) {
                alert('‚ö†Ô∏è N√£o h√° jurados suficientes para formar o conselho (m√≠nimo 7)!');
                return;
            }
            
            // Resetar listas
            conselho = [];
            recusadosDefesa = [];
            recusadosAcusacao = [];
            impedidos = [];
            
            let recusasDefesa = 3;
            let recusasAcusacao = 3;
            let listaPresentes = [...presentes]; // Copia a lista de presentes para n√£o modificar a original
            
            // Sorteio autom√°tico
            while (conselho.length < 7 && listaPresentes.length > 0) {
                const indiceAleatorio = Math.floor(Math.random() * listaPresentes.length);
                const juradoSorteado = listaPresentes[indiceAleatorio];
                
                const aceitar = confirm(`üé≤ Jurado sorteado: ${juradoSorteado}\n\n‚úÖ Clique OK para ACEITAR no conselho\n‚ùå Clique CANCELAR para RECUSAR`);
                
                if (aceitar) {
                    conselho.push(juradoSorteado);
                } else {
                    const tipoRecusa = prompt(`‚ùå Recusa do jurado: ${juradoSorteado}\n\nDigite:\n1 - Recusa pela DEFESA\n2 - Recusa pela ACUSA√á√ÉO\n3 - Impedimento (Foro √çntimo)`);
                    
                    if (tipoRecusa === '1') {
                        if (recusasDefesa > 0) {
                            recusadosDefesa.push(juradoSorteado);
                            recusasDefesa--;
                        } else {
                            alert('‚ö†Ô∏è Limite de recusas pela Defesa atingido! Jurado ser√° aceito automaticamente.');
                            conselho.push(juradoSorteado);
                        }
                    } else if (tipoRecusa === '2') {
                        if (recusasAcusacao > 0) {
                            recusadosAcusacao.push(juradoSorteado);
                            recusasAcusacao--;
                        } else {
                            alert('‚ö†Ô∏è Limite de recusas pela Acusa√ß√£o atingido! Jurado ser√° aceito automaticamente.');
                            conselho.push(juradoSorteado);
                        }
                    } else if (tipoRecusa === '3') {
                        impedidos.push(juradoSorteado);
                    } else {
                        alert('‚ö†Ô∏è Op√ß√£o inv√°lida! Jurado ser√° aceito automaticamente.');
                        conselho.push(juradoSorteado);
                    }
                }
                
                listaPresentes.splice(indiceAleatorio, 1); // Remove o jurado sorteado da lista de dispon√≠veis
            }
            
            atualizarListasResultado();
            
            if (conselho.length === 7) {
                alert('üéâ Conselho de Senten√ßa formado com sucesso!\n\nüë• 7 jurados sorteados e aceitos.');
            } else {
                alert('‚ö†Ô∏è N√£o foi poss√≠vel formar o conselho completo devido ao n√∫mero insuficiente de jurados.');
            }
        }

        // Atualizar listas de resultado
        function atualizarListasResultado() {
            document.getElementById('conselho-lista').innerHTML = conselho.map((j, i) => 
                `<div class="lista-item">${i + 1}. ${j}</div>`
            ).join('');
            
            document.getElementById('recusados-defesa').innerHTML = recusadosDefesa.length > 0 
                ? recusadosDefesa.map(j => `<div class="lista-item">${j}</div>`).join('')
                : '<div style="color: #6c757d; font-style: italic;">Nenhum jurado recusado</div>';
                
            document.getElementById('recusados-acusacao').innerHTML = recusadosAcusacao.length > 0 
                ? recusadosAcusacao.map(j => `<div class="lista-item">${j}</div>`).join('')
                : '<div style="color: #6c757d; font-style: italic;">Nenhum jurado recusado</div>';
                
            document.getElementById('impedidos-lista').innerHTML = impedidos.length > 0 
                ? impedidos.map(j => `<div class="lista-item">${j}</div>`).join('')
                : '<div style="color: #6c757d; font-style: italic;">Nenhum jurado impedido</div>';
        }

        // Fun√ß√µes para mostrar/ocultar campos condicionais
        function mostrarOAB() {
            const campo = document.getElementById('campo-oab');
            const tipo = document.getElementById('tipo-defensor').value;
            campo.classList.toggle('ativo', tipo === 'Advogado(a)');
        }

        function mostrarSuplentes() {
            const campo = document.getElementById('campo-suplentes');
            const valor = document.getElementById('suplentes').value;
            campo.classList.toggle('ativo', valor === 'Sim');
        }

        function mostrarVitima() {
            const campo = document.getElementById('campo-vitima');
            const valor = document.getElementById('ha-vitima').value;
            campo.classList.toggle('ativo', valor === 'Sim');
        }

        function mostrarTestemunhas() {
            const campo = document.getElementById('campos-testemunhas');
            const valor = document.getElementById('ha-testemunhas').value;
            campo.classList.toggle('ativo', valor === 'Sim');
        }

        function mostrarDiligencia() {
            const campo = document.getElementById('campos-diligencia');
            const valor = document.getElementById('ha-diligencia').value;
            campo.classList.toggle('ativo', valor === 'Sim');
        }

        function mostrarReplica() {
            const campo = document.getElementById('campos-replica');
            const valor = document.getElementById('houve-replica').value;
            campo.classList.toggle('ativo', valor === 'Sim');
        }

        function mostrarRecurso() {
            const campo = document.getElementById('campos-recurso');
            const valor = document.getElementById('houve-recurso').value;
            campo.classList.toggle('ativo', valor === 'Sim');
        }

        function mostrarProximaSessao() {
            const campo = document.getElementById('campos-proxima-sessao');
            const valor = document.getElementById('proxima-sessao').value;
            campo.classList.toggle('ativo', valor === 'Sim');
        }

        function atualizarTextoSentenca() {
            const resultado = document.getElementById('resultado-julgamento').value;
            const texto = document.getElementById('texto-sentenca');
            
            if (resultado === 'Absolvi√ß√£o') {
                texto.innerHTML = 'Terminada a vota√ß√£o e assinado o termo, o MM. Juiz de Direito determinou a abertura das portas para que o p√∫blico retornasse ao sal√£o do j√∫ri e leu a <strong>SENTEN√áA ABSOLUT√ìRIA</strong>, em voz alta, tornando p√∫blico o julgado.';
            } else {
                texto.innerHTML = 'Terminada a vota√ß√£o e assinado o termo, o MM. Juiz de Direito determinou a abertura das portas para que o p√∫blico retornasse ao sal√£o do j√∫ri e leu a <strong>SENTEN√áA CONDENAT√ìRIA</strong>, em voz alta, tornando p√∫blico o julgado.';
            }
        }

        // Fun√ß√£o para formatar hora
        function formatarHora(hora) {
            if (!hora) return '';
            const [h, m] = hora.split(':');
            const hInt = parseInt(h);
            const mInt = parseInt(m);
            if (mInt === 0) {
                return `${hInt}h`;
            } else {
                return `${hInt}h${mInt.toString().padStart(2, '0')}min`;
            }
        }

        // Fun√ß√£o para formatar data
        function formatarData(data) {
            if (!data) return '';
            const [ano, mes, dia] = data.split('-');
            return `${dia}/${mes}/${ano}`;
        }

        // Fun√ß√£o para gerar a ata
        function gerarAta() {
            // Valida√ß√µes b√°sicas
            const numeroProcesso = document.getElementById('numero-processo').value.trim();
            if (!numeroProcesso || !/^\d{7}-\d{2}\.\d{4}\.8\.06\.\d{4}$/.test(numeroProcesso)) {
                alert('‚ùå N√∫mero de processo inv√°lido ou n√£o preenchido!\nFormato: 0000000-00.0000.8.06.0000');
                return;
            }

            if (conselho.length === 0) {
                alert('‚ùå Realize o sorteio do conselho antes de gerar a ata!');
                return;
            }

            // Coletar dados do formul√°rio
            const dados = {
                numeroSessao: document.getElementById('numero-sessao').value,
                dataSessao: formatarData(document.getElementById('data-sessao').value),
                horaSessao: formatarHora(document.getElementById('hora-sessao').value),
                numeroProcesso: numeroProcesso,
                nomeJuiz: document.getElementById('nome-juiz').value,
                nomePromotor: document.getElementById('nome-promotor').value,
                tipoDefensor: document.getElementById('tipo-defensor').value,
                nomeDefensor: document.getElementById('nome-defensor').value,
                oab: document.getElementById('oab').value,
                nomeAcusados: document.getElementById('nome-acusados').value,
                juradosDispensados: document.getElementById('jurados-dispensados').value,
                fundamentoDispensa: document.getElementById('fundamento-dispensa').value,
                suplentes: document.getElementById('suplentes').value,
                nomesSuplentes: document.getElementById('nomes-suplentes').value,
                testemunhasDispensadas: document.getElementById('testemunhas-dispensadas').value,
                haVitima: document.getElementById('ha-vitima').value,
                nomeVitima: document.getElementById('nome-vitima').value,
                haTestemunhas: document.getElementById('ha-testemunhas').value,
                testemunhasAcusacao: document.getElementById('testemunhas-acusacao').value,
                informantesAcusacao: document.getElementById('informantes-acusacao').value,
                testemunhasDefesa: document.getElementById('testemunhas-defesa').value,
                informantesDefesa: document.getElementById('informantes-defesa').value,
                haDiligencia: document.getElementById('ha-diligencia').value,
                qualDiligencia: document.getElementById('qual-diligencia').value,
                diligenciaDeferida: document.getElementById('diligencia-deferida').value,
                fundamentoDiligencia: document.getElementById('fundamento-diligencia').value,
                horaMpInicio: formatarHora(document.getElementById('hora-mp-inicio').value),
                horaMpFim: formatarHora(document.getElementById('hora-mp-fim').value),
                pedidoMp: document.getElementById('pedido-mp').value,
                horaDefesaInicio: formatarHora(document.getElementById('hora-defesa-inicio').value),
                horaDefesaFim: formatarHora(document.getElementById('hora-defesa-fim').value),
                pedidoDefesa: document.getElementById('pedido-defesa').value,
                houveReplica: document.getElementById('houve-replica').value,
                horaReplicaInicio: formatarHora(document.getElementById('hora-replica-inicio').value),
                horaReplicaFim: formatarHora(document.getElementById('hora-replica-fim').value),
                horaTriplicaInicio: formatarHora(document.getElementById('hora-treplica-inicio').value),
                horaTriplicaFim: formatarHora(document.getElementById('hora-treplica-fim').value),
                resultadoJulgamento: document.getElementById('resultado-julgamento').value,
                houveRecurso: document.getElementById('houve-recurso').value,
                quemRecorreu: document.getElementById('quem-recorreu').value,
                fundamentoRecurso: document.getElementById('fundamento-recurso').value,
                proximaSessao: document.getElementById('proxima-sessao').value,
                dataProximaSessao: formatarData(document.getElementById('data-proxima-sessao').value),
                horaProximaSessao: formatarHora(document.getElementById('hora-proxima-sessao').value)
            };

            // Gerar texto da ata
            let ata = [];
            
            ata.push(`ATA DA ${dados.numeroSessao}¬™ SESS√ÉO DE JULGAMENTO DO TRIBUNAL DO J√öRI`);
            ata.push(`Aos ${dados.dataSessao}, √†s ${dados.horaSessao}, nesta cidade e Comarca de Tau√°, Estado do Cear√°, no edif√≠cio do Tribunal do J√∫ri, em plen√°rio, presentes o MM. Juiz de Direito, Dr. ${dados.nomeJuiz}, o Promotor de Justi√ßa, Dr. ${dados.nomePromotor}, o ${dados.tipoDefensor} ${dados.nomeDefensor}${dados.tipoDefensor === 'Advogado(a)' && dados.oab ? ' - OAB/' + dados.oab : ''}, os Senhores Jurados abaixo identificados, o(s) Acusado(s), Sr(s). ${dados.nomeAcusados} e os demais circunstantes.`);
            
            ata.push(`√Äs ${dados.horaSessao} deu-se in√≠cio aos trabalhos preparat√≥rios para o julgamento dos autos de A√ß√£o Penal n¬∫ ${dados.numeroProcesso}, momento em que o MM. Juiz de Direito, Presidente da presente sess√£o de julgamento, ap√≥s atestar a presen√ßa das partes e demais profissionais acima identificados, deliberou acerca dos pedidos de isen√ß√£o e dispensa dos jurados.`);
            
            ata.push("No mesmo momento, o MM. Juiz Presidente determinou que as testemunhas/ofendido(s) presentes fossem recolhidas a um lugar onde umas n√£o pudessem ouvir os depoimentos das outras, garantindo-se a incomunicabilidade, e passou a verificar se a urna continha as c√©dulas com os nomes dos jurados sorteados.");
            
            ata.push("Precedentemente ao sorteio dos jurados e, em aten√ß√£o ao art. 5¬∫ da Recomenda√ß√£o n. 55, de 08/10/2019, do CNJ, o magistrado determinou a exibi√ß√£o do v√≠deo institucional elaborado por aquele √≥rg√£o, objetivando ambientar os jurados convocados para a sess√£o de julgamento.");
            
            ata.push(`√Äs ${dados.horaSessao} foi dado in√≠cio ao julgamento do(s) r√©u(s) ${dados.nomeAcusados}, utilizando-se do sistema Microsoft Teams, na qual se procedeu √† grava√ß√£o audiovisual dos depoimentos e do interrogat√≥rio. O MM. Juiz de Direito ordenou que o Sr. Diretor de Secretaria chamasse nominalmente os jurados convocados, sendo que compareceram os seguintes jurados:`);
            
            ata.push(presentes.join(', '));

            // Par√°grafos condicionais
            if (dados.juradosDispensados.trim()) {
                ata.push(`\nDiante do requerimento tempestivo foram dispensados os jurados: ${dados.juradosDispensados}.`);
            }
            if (dados.fundamentoDispensa.trim()) {
                ata.push(`Os pedidos de dispensa/isen√ß√£o contaram com o deferimento do Juiz Presidente amparado nos seguintes fundamentos: ${dados.fundamentoDispensa}.`);
            }
            if (dados.suplentes === "Sim" && dados.nomesSuplentes.trim()) {
                ata.push(`Foram sorteados suplentes: ${dados.nomesSuplentes}.`);
            }
            if (dados.testemunhasDispensadas.trim()) {
                ata.push(`De comum acordo, as partes dispensaram a oitiva das testemunhas ${dados.testemunhasDispensadas}, o que foi homologado pelo ju√≠zo.`);
            }

            ata.push("Ap√≥s, o MM. Juiz declarou que iria formar o Conselho de Senten√ßa e advertiu os jurados quanto √†s hip√≥teses de impedimento, suspei√ß√£o e incompatibilidade, bem como, que uma vez sorteados, n√£o poderiam se comunicar entre si e com outrem, nem manifestar sua opini√£o sobre o processo, sob pena de exclus√£o do Conselho de Senten√ßa e multa de 01 (um) a 10 (dez) sal√°rios-m√≠nimos.");
            
            ata.push("√Ä medida que os nomes foram sorteados, o MM. Juiz de Direito realizou a leitura em voz alta e, aceitos, compuseram o Conselho de Senten√ßa os seguintes jurados:");
            
            conselho.forEach((jurado, i) => {
                ata.push(`${i+1}. ${jurado}`);
            });
            
            ata.push(`Foram recusados imotivadamente pelo Minist√©rio P√∫blico os seguintes jurados: ${recusadosAcusacao.length > 0 ? recusadosAcusacao.join(', ') : 'Nenhum'}.`);
            ata.push(`Foram recusados imotivadamente pela Defesa os seguintes jurados: ${recusadosDefesa.length > 0 ? recusadosDefesa.join(', ') : 'Nenhum'}.`);
            
            ata.push('Seguindo, o MM. Juiz Presidente compromissou o Conselho de Senten√ßa lendo a exorta√ß√£o constante do art. 472 do CPP, pela qual cada jurado chamado nominalmente respondeu: "assim o prometo". Os Srs. Jurados receberam os documentos a que alude o art. 472, par√°grafo √∫nico, do CPP, momento em que o MM. Juiz de Direito explicou a sua natureza jur√≠dica, expressando-se nos seguintes termos:');
            
            ata.push('"Prezados membros do Conselho de Senten√ßa, a partir desse momento os senhores ter√£o acesso ao relat√≥rio do processo e tamb√©m √† decis√£o de pron√∫ncia. Esclare√ßo que a decis√£o de pron√∫ncia representa um mero ju√≠zo de admissibilidade da vers√£o acusat√≥ria, sem a qual o r√©u n√£o poderia ser julgado perante o Tribunal do J√∫ri. Em hip√≥tese alguma, constitui um prejulgamento do caso e n√£o dever√° ser considerada pelos Srs. como um argumento de autoridade apto a qualquer ju√≠zo de valor a respeito do m√©rito. Por mandamento constitucional, ap√≥s a devida instru√ß√£o e sustenta√ß√µes orais em plen√°rio, o Conselho de Senten√ßa √© soberano para, sigilosamente, apreciar as teses que envolvem o presente caso, livre de qualquer influ√™ncia de terceiros ou mesmo da justi√ßa togada."');

            // Instru√ß√£o plen√°ria
            if (dados.haVitima === "Sim" && dados.nomeVitima.trim()) {
                ata.push(`Seguindo, teve in√≠cio a instru√ß√£o plen√°ria com a oitiva da v√≠tima ${dados.nomeVitima}.`);
            }

            // Testemunhas
            if (dados.haTestemunhas === "Sim") {
                if (dados.testemunhasAcusacao.trim()) {
                    ata.push(`Em continua√ß√£o, foram inquiridas as seguintes testemunhas/informantes arroladas pela acusa√ß√£o: ${dados.testemunhasAcusacao}. As quais prestaram o compromisso de dizer a verdade, com exce√ß√£o de ${dados.informantesAcusacao || '________'}, que foi ouvido como informante.`);
                }
                if (dados.testemunhasDefesa.trim()) {
                    ata.push(`Posteriormente, foram tomados os depoimentos das testemunhas/informantes indicadas pela Defesa: ${dados.testemunhasDefesa}. As quais prestaram o compromisso de dizer a verdade, com exce√ß√£o de ${dados.informantesDefesa || '________'}, que foi ouvido como informante. Todos os depoimentos foram gravados em arquivo de √°udio/v√≠deo e foram juntados aos autos.`);
                }
            } else {
                ata.push("Ap√≥s, passou-se ao interrogat√≥rio do r√©u.");
            }

            // Dilig√™ncia
            if (dados.haDiligencia === "Sim") {
                ata.push(`Foi requerida dilig√™ncia probat√≥ria ou leitura de pe√ßas? Sim. Se sim, qual? ${dados.qualDiligencia} Foi deferida? ${dados.diligenciaDeferida} Por quais fundamentos? ${dados.fundamentoDiligencia}`);
            } else {
                ata.push("Foi requerida dilig√™ncia probat√≥ria ou leitura de pe√ßas? N√£o.");
            }

            ata.push("Ato cont√≠nuo, foi garantido ao acusado o direito de entrevistar-se de maneira reservada com o seu defensor. Ap√≥s, o acusado foi informado de todos os seus direitos constitucionais, em especial: o direito de permanecer calado e de n√£o responder as perguntas que lhe forem formuladas.");
            
            ata.push("Dirigindo-se aos Srs. Jurados, o MM. Juiz de Direito explicou que o eventual sil√™ncio do acusado n√£o importar√° em confiss√£o e n√£o poder√° ser interpretado em preju√≠zo da sua defesa. Na sequ√™ncia, o acusado exerceu a sua autodefesa em plen√°rio, tudo conforme arquivo de √°udio/v√≠deo que foi juntado aos autos.");
            
            ata.push(`Seguindo, o MM. Juiz de Direito advertiu √†s partes das proibi√ß√µes constantes no artigo 478, incisos I e II e artigo 479 do C√≥digo de Processo Penal e passou a palavra ao DD. representante do Minist√©rio P√∫blico, Dr. ${dados.nomePromotor}, o qual, utilizando-se do hor√°rio das ${dados.horaMpInicio} √†s ${dados.horaMpFim}, requereu: ${dados.pedidoMp || '____'}.`);
            
            ata.push(`Em seguida, foi concedida a palavra ao ${dados.tipoDefensor} ${dados.nomeDefensor}${dados.tipoDefensor === 'Advogado(a)' && dados.oab ? ' - OAB/' + dados.oab : ''}, que requereu: ${dados.pedidoDefesa || '____'}. Utilizando-se do hor√°rio das ${dados.horaDefesaInicio} √†s ${dados.horaDefesaFim}.`);
            
            ata.push(`Terminado o discurso da Defesa, o Merit√≠ssimo Juiz indagou √† Representante do Minist√©rio P√∫blico se desejava ir √† r√©plica, tendo ela respondido que ${dados.houveReplica}.`);

            if (dados.houveReplica === "Sim") {
                ata.push(`Usando o direito da r√©plica das ${dados.horaReplicaInicio} √†s ${dados.horaReplicaFim}, o DD. representante do Minist√©rio P√∫blico reiterou o pedido de condena√ß√£o.`);
                ata.push(`Treplicando, a Defesa falou das ${dados.horaTriplicaInicio} √†s ${dados.horaTriplicaFim} e refor√ßou o pedido de absolvi√ß√£o.`);
            }

            ata.push("Encerrados os debates, ap√≥s questionados pelo MM. Juiz de Direito, os jurados informaram que estavam habilitados a julgar o caso penal e que n√£o necessitavam de qualquer outro esclarecimento.");
            ata.push("Na sequ√™ncia, uma vez lidos e explicados os quesitos em plen√°rio, nenhuma das partes fez qualquer requerimento ou reclama√ß√£o. Em seguida, o MM. Juiz de Direito declarou que iria proceder √† vota√ß√£o e solicitou que o sal√£o fosse esvaziado para este fim, permanecendo apenas as partes, o Oficial de Justi√ßa e a mim, Diretor de Secretaria.");
            ata.push("No sal√£o esvaziado, sob sua presid√™ncia, ap√≥s a advert√™ncia constante no disposto no artigo 485, ¬ß 2¬∫, do C√≥digo de Processo Penal, explicou o procedimento a ser seguido e deu in√≠cio √† vota√ß√£o, fazendo o uso de pequenas c√©dulas, feitas de papel opaco, facilmente dobr√°veis e que continham as palavras \"sim\" e \"n√£o\".");
            ata.push("Durante a vota√ß√£o, foram utilizadas duas urnas, sendo uma para os votos e a outra para as c√©dulas n√£o utilizadas. Ap√≥s cada resposta, verificados os votos e as c√©dulas n√£o utilizadas, o MM. Juiz de Direito determinou o registro no termo de vota√ß√£o de cada quesito, bem como o resultado do julgamento.");
            
            // Senten√ßa
            const textoSentenca = dados.resultadoJulgamento === 'Absolvi√ß√£o' 
                ? "Terminada a vota√ß√£o e assinado o termo, o MM. Juiz de Direito determinou a abertura das portas para que o p√∫blico retornasse ao sal√£o do j√∫ri e leu a SENTEN√áA ABSOLUT√ìRIA, em voz alta, tornando p√∫blico o julgado."
                : "Terminada a vota√ß√£o e assinado o termo, o MM. Juiz de Direito determinou a abertura das portas para que o p√∫blico retornasse ao sal√£o do j√∫ri e leu a SENTEN√áA CONDENAT√ìRIA, em voz alta, tornando p√∫blico o julgado.";
            
            ata.push(textoSentenca);

            // Recurso
            if (dados.houveRecurso === "Sim") {
                ata.push(`${dados.quemRecorreu} manifestou, em plen√°rio, a inten√ß√£o de recorrer da decis√£o, nos termos do ${dados.fundamentoRecurso}, alegando nulidade posterior √† pron√∫ncia.`);
                ata.push('Decis√£o: "Recebo o recurso interposto uma vez que est√£o presentes os pressupostos de admissibilidade. Ap√≥s a degrava√ß√£o dos registros de √°udios desta sess√£o de julgamento, remetam-se os autos √† Defensoria P√∫blica para apresenta√ß√£o das raz√µes recursais. Em seguida, d√™-se vista ao Minist√©rio P√∫blico para contrarraz√µes. Por fim, proceda-se a secretaria com as demais dilig√™ncias de praxe."');
            }

            // Pr√≥xima data
            if (dados.proximaSessao === "Sim") {
                ata.push(`Agradecendo √†s partes e aos Srs. Jurados e, lembrando-os da convoca√ß√£o para o dia ${dados.dataProximaSessao}, √†s ${dados.horaProximaSessao}, o MM. Juiz de Direito deu por encerrada a sess√£o. Do que para constar, eu, Murilo Medeiros Mariz Alexandrino Feitosa, Diretor de Secretaria, lavrei a presente ata.`);
            } else {
                ata.push("Agradecendo √†s partes e aos Srs. Jurados, o MM. Juiz de Direito deu por encerrada a sess√£o. Do que para constar, eu, Murilo Medeiros Mariz Alexandrino Feitosa, Diretor de Secretaria, lavrei a presente ata.");
            }

            // Criar e baixar arquivo
            const textoCompleto = ata.join('\n\n');
            const blob = new Blob([textoCompleto], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ATA_JURI_${numeroProcesso}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            alert('‚úÖ Ata gerada e baixada com sucesso!\n\nüìÑ Arquivo: ATA_JURI_' + numeroProcesso + '.txt');
        }
    </script>
</body>
</html>
